<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Oxymoron — Web Developer and Reverse Engineering</title>
<meta name="description" content="Oxymoron (るーしー) — Web Developer and Reverse Engineering" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600;800&display=swap" rel="stylesheet">
<style>
/* -------------------------
   Base / Theme variables
--------------------------*/
:root{
  --bg:#0b0b0b;
  --card:#0f1113;
  --muted:#9aa4ad;
  --text:#eef2f6;
  --accent:#7aa0c7; /* subtle cool */
  --white:#ffffff;
  --radius:14px;
  --gap:12px;
  --shadow:0 10px 30px rgba(0,0,0,0.6);
  --glass: rgba(255,255,255,0.03);
}
[data-theme="light"]{
  --bg:#f6f7f9;
  --card:#ffffff;
  --muted:#6b7176;
  --text:#0b0d0f;
  --accent:#2f5870;
  --shadow:0 8px 24px rgba(15,20,25,0.06);
  --glass: rgba(0,0,0,0.03);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Inter, 'Noto Sans JP', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;}
a{color:inherit;text-decoration:none}
.site{min-height:100vh;display:flex;flex-direction:column;align-items:stretch}

/* -------------------------
   Topbar
--------------------------*/
.topbar{
  position:fixed;top:10px;left:12px;right:12px;
  display:flex;align-items:center;justify-content:space-between;
  gap:10px;padding:8px;
  z-index:60;
  backdrop-filter: blur(6px);
}
.left-wrap, .center-wrap, .right-wrap{display:flex;align-items:center;gap:8px}
.center-wrap{flex:1;justify-content:center}
.topnav{display:flex;gap:14px}
.topnav a{padding:8px 10px;border-radius:10px;font-weight:600;color:var(--muted);transition:all .18s}
.topnav a.active{color:var(--text);background:var(--glass);border:1px solid rgba(255,255,255,0.02)}

/* icon buttons (big touch area) */
.btn {
  width:48px;height:48px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;
  border:0;background:linear-gradient(180deg,transparent,var(--glass));
  cursor:pointer;color:var(--text);box-shadow:var(--shadow);transition:transform .12s, box-shadow .12s;
}
.btn:active{transform:scale(.98)}
.icon-small{width:40px;height:40px}

/* theme toggle circular with color dot */
.theme-toggle{
  width:46px;height:46px;border-radius:999px;display:flex;align-items:center;justify-content:center;
  position:relative;border:1px solid rgba(255,255,255,0.03);background:var(--card);
}
.theme-dot{
  width:22px;height:22px;border-radius:999px;border:1px solid rgba(0,0,0,0.12);box-shadow:0 2px 6px rgba(0,0,0,0.3);
}

/* search button with animation state */
.search-btn{position:relative}
.search-btn .spin{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}
@keyframes spinPulse {0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(1.06)}100%{transform:rotate(360deg) scale(1)}}

/* -------------------------
   Side menu
--------------------------*/
.side-menu{
  position:fixed;left:-92%;top:0;height:100%;width:360px;max-width:92%;
  background:var(--card);padding:18px;border-radius:0 18px 18px 0;box-shadow:0 40px 80px rgba(0,0,0,0.6);
  transition:left .28s ease;z-index:70;overflow:auto;
}
.side-menu.open{left:0}
.side-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.side-links a{display:block;padding:10px 6px;border-radius:8px;color:var(--text);font-weight:600}
.side-block{display:flex;flex-direction:column;gap:12px}

/* overlay */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.36);z-index:65;opacity:0;transition:opacity .18s}
.overlay.show{opacity:1}

/* -------------------------
   Main area (centered)
--------------------------*/
.container{max-width:860px;margin:92px auto 120px;padding:0 16px;width:100%}
.card{
  background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  border-radius:12px;padding:18px;margin-bottom:18px;border:1px solid rgba(255,255,255,0.02);
  box-shadow: var(--shadow);
}

/* hero */
.hero{display:flex;flex-direction:column;align-items:center;gap:12px;padding-top:6px}
.avatar{
  width:140px;height:140px;border-radius:999px;overflow:hidden;border:3px solid rgba(255,255,255,0.04);background:linear-gradient(180deg,#111,#000);
  display:flex;align-items:center;justify-content:center;
}
.avatar img{width:100%;height:100%;object-fit:cover;display:block}
.name{font-weight:800;font-size:28px;letter-spacing:0.6px;color:var(--text)}
.title{font-weight:600;color:var(--muted);font-size:13px}

/* sns row */
.sns-row{display:flex;gap:10px;margin-top:8px;flex-wrap:wrap;justify-content:center}
.sns a {
  width:52px;height:52px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;
  border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text);transition:transform .12s, background .12s;
}
.sns a:hover{transform:translateY(-4px);background:var(--accent);color:#fff}

/* profile / projects / blog layout */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media (max-width:740px){ .grid-2{grid-template-columns:1fr} .topnav{display:none} }

/* profile box */
.profile-box p{margin:6px 0;color:var(--muted)}

/* projects */
.proj-list{display:flex;flex-direction:column;gap:12px}
.proj-card{display:flex;align-items:center;gap:12px;padding:12px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.03)}
.proj-icon{width:56px;height:56px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff}
.proj-title{font-weight:700}

/* player (cool) */
.player{
  display:flex;align-items:center;gap:12px;justify-content:space-between;flex-wrap:wrap;
  padding:12px;border-radius:10px;background:linear-gradient(90deg, rgba(255,255,255,0.01), transparent);
}
.play-btn{width:64px;height:64px;border-radius:999px;border:0;background:linear-gradient(135deg,var(--accent),var(--accent-strong));color:#fff;font-size:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}
.track-meta{flex:1;margin-left:8px}
.progress{height:6px;border-radius:999px;background:rgba(255,255,255,0.04);overflow:hidden;margin-top:8px}
.progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#fff);width:0%}

/* footer */
.footer{padding:12px;text-align:center;color:var(--muted);position:fixed;left:0;right:0;bottom:10px;margin:0 auto;width:100%;display:flex;justify-content:center;pointer-events:none}
.footer-inner{max-width:860px;width:100%;pointer-events:auto}

/* small helpers */
.h1small{font-size:16px;font-weight:700;margin-bottom:8px}
.kv{font-size:13px;color:var(--muted)}
.center{display:flex;justify-content:center;align-items:center}
.small{font-size:12px;color:var(--muted)}

/* tags */
.tag{font-size:11px;padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,0.03);color:var(--muted)}

/* tweak for tap target - hamburger larger clickable */
.hamb-large{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center}

/* subtle transitions */
*{transition:background .12s,color .12s}
</style>
</head>
<body>
<div id="app" class="site" data-theme="dark">

  <!-- Topbar -->
  <header class="topbar" role="navigation" aria-label="primary">
    <div class="left-wrap">
      <button id="hambBtn" class="btn hamb-large" aria-label="open menu">
        <!-- bigger hamburger -->
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M3 7h18M3 12h18M3 17h18" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
    </div>

    <div class="center-wrap">
      <nav class="topnav" aria-label="sections">
        <a href="#" class="nav-link active" data-section="home">Home</a>
        <a href="#" class="nav-link" data-section="project">Project</a>
        <a href="#" class="nav-link" data-section="blog">Blog</a>
      </nav>
    </div>

    <div class="right-wrap">
      <button id="searchBtn" class="btn search-btn" aria-label="search">
        <span class="spin" id="searchIcon">
          <!-- magnifier -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><circle cx="11" cy="11" r="5"/><path d="M21 21l-4.5-4.5"/></svg>
        </span>
      </button>

      <button id="themeBtn" class="theme-toggle" aria-label="toggle theme">
        <div class="theme-dot" id="themeDot" title="theme color"></div>
      </button>
    </div>
  </header>

  <!-- overlay -->
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <!-- Side menu -->
  <aside id="sideMenu" class="side-menu" aria-hidden="true">
    <div class="side-head">
      <strong>Menu</strong>
      <button id="closeSide" class="btn icon-small" aria-label="close menu">✕</button>
    </div>

    <div class="side-block">
      <div>
        <div class="h1small">About Me</div>
        <nav class="side-links">
          <a href="#profile" data-section="about">Profile</a>
          <a href="#hobby" data-section="about">Hobby</a>
          <a href="#life" data-section="about">Life</a>
          <a href="#device" data-section="about">Device</a>
          <a href="#skills" data-section="about">Skills</a>
          <a href="#social" data-section="about">Social Link</a>
          <a href="#contact" data-section="about">Contact</a>
        </nav>
      </div>

      <div>
        <div class="h1small">Quick Links</div>
        <nav class="side-links">
          <a href="#" data-section="home">Home</a>
          <a href="#" data-section="project">Projects</a>
          <a href="#" data-section="blog">Blog</a>
        </nav>
      </div>
    </div>

    <div style="margin-top:18px;font-size:13px;color:var(--muted)">© <span id="year1"></span> Oxymoron</div>
  </aside>

  <!-- Search bar (hidden) -->
  <div id="searchBar" class="card" style="display:none;position:fixed;top:76px;left:50%;transform:translateX(-50%);width:calc(100% - 40px);max-width:720px;z-index:75;">
    <div style="display:flex;gap:8px;align-items:center">
      <input id="searchInput" placeholder="検索ワードを入力..." style="flex:1;padding:12px;border-radius:10px;border:0;background:transparent;color:var(--text);outline:0;font-size:15px" />
      <button id="closeSearch" class="btn icon-small" aria-label="close search">✕</button>
    </div>
  </div>

  <!-- Main container -->
  <main class="container" role="main">
    <!-- Home -->
    <section id="home" class="card section">
      <div class="hero">
        <div class="avatar" title="profile (replace images/profile.jpg)">
          <!-- placeholder: replace with your image -->
          <img id="profileImg" src="images/profile.jpg" alt="Oxymoron (profile)">
        </div>
        <div class="name">Oxymoron</div>
        <div class="title">Web Developer and Reverse Engineering</div>

        <div class="sns-row" id="snsRow" aria-label="social links">
          <!-- Discord / Twitter / TikTok / GitHub / Telegram / Note / SoundCloud / Spotify -->
          <a href="https://dc.gg/ctkp" target="_blank" aria-label="Discord (雑談)" title="Discord (雑談)">
            <!-- Discord SVG -->
            <svg width="20" height="20" viewBox="0 0 71 55" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M60.5 4.5C54.7 1.3 48.1 0 41.4 0 37.6 0 33.7 0.7 30 1.9 29.6 2 29.4 2.3 29.3 2.7 28.9 4.1 28.5 5.5 28.1 6.9 23.2 6.1 18.6 5.8 14.1 7 8 8.5 2.4 12.6 0 18.9c0 0 6.2-3.7 12.9-5.1 0 0-.1 2.9 1.1 5.9 0 0 5.3-2 11.9-2s12.7 2 12.7 2 1.1-3 1.1-5.9c6.7 1.4 12.9 5.1 12.9 5.1C68.6 12.6 62.9 8.5 56.8 7 52.3 5.8 47.7 6.1 42.8 6.9 42.4 5.5 42 4.1 41.6 2.7 41.5 2.3 41.3 2 40.9 1.9 37.2 0.7 33.3 0 29.5 0 22.8 0 16.2 1.3 10.4 4.5 4.5 14.1 6 18.9 12.3 25.1 18.6 31 25 34.8 32.1 37.2 32.9 37.6 33.9 37.9 34.6 38.1 35.7 38.3 43.9 39 50.7 38.1 56.8 34.8 62.9 31.5 68.6 27.4 68.6 27.4 66.2 21.1 60.5 17 54.4 15.5 49.9 14.3 45.3 14.1 40.4 14.9 40 16.3 39.6 17.6 39.2 18.9 34.3 18.1 29.7 17.8 25.2 19 19.1 20.5 13.5 24.6 10.6 31.2 8 37.8 8 37.8 13.6 29.7 21.1 23.8 29 19.4 36.8 16 45.7 14.1 49.6 12.6 53.4 11.3 57.9 10.1 60.5 9.1" fill="currentColor"/></svg>
          </a>

          <a href="https://dc.gg/aarr" target="_blank" aria-label="Discord (shop)" title="Discord (shop)">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M7.5 9.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm9 0a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/></svg>
          </a>

          <a href="https://dc.gg/dpko" target="_blank" aria-label="Discord (nsfw)" title="Discord (nsfw)">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M7.5 9.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm9 0a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/></svg>
          </a>

          <a href="https://twitter.com/rucyj" target="_blank" aria-label="Twitter (本垢)" title="Twitter">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M23 3a10.9 10.9 0 0 1-3.1 1.5A4.5 4.5 0 0 0 12 7.7v1A10.6 10.6 0 0 1 3 4s-4 9 5 13a11.6 11.6 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.1-.8A7.7 7.7 0 0 0 23 3z"/></svg>
          </a>

          <a href="https://twitter.com/hisamex" target="_blank" aria-label="Twitter (相互)" title="Twitter (相互)">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M23 3a10.9 10.9 0 0 1-3.1 1.5A4.5 4.5 0 0 0 12 7.7v1A10.6 10.6 0 0 1 3 4s-4 9 5 13a11.6 11.6 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.1-.8A7.7 7.7 0 0 0 23 3z"/></svg>
          </a>

          <a href="https://twitter.com/razbeu" target="_blank" aria-label="Twitter (避難)" title="Twitter (避難)">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M23 3a10.9 10.9 0 0 1-3.1 1.5A4.5 4.5 0 0 0 12 7.7v1A10.6 10.6 0 0 1 3 4s-4 9 5 13a11.6 11.6 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.1-.8A7.7 7.7 0 0 0 23 3z"/></svg>
          </a>

          <a href="https://tiktok.com/@ragnyard" target="_blank" aria-label="TikTok" title="TikTok">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M9 3v12.5A4.5 4.5 0 1 1 6 9.5V7a6 6 0 0 0 3-4z"/></svg>
          </a>

          <a href="https://github.com/tls-client" target="_blank" aria-label="GitHub" title="GitHub">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M12 2C6.5 2 2 6.5 2 12c0 4.4 2.9 8.2 6.9 9.5.5.1.7-.2.7-.5v-1.8C8.7 18.6 8 17.8 8 17.8c-.4-1-.9-1.3-.9-1.3-.7-.5.1-.5.1-.5.8.1 1.2.8 1.2.8.7 1.2 1.8.9 2.2.7.1-.6.3-1 .6-1.2-2.2-.3-4.5-1.1-4.5-5 0-1.1.4-2 1-2.7.0-.3-.4-1.3.1-2.7 0 0 .8-.3 2.8 1 .8-.2 1.7-.3 2.6-.3s1.8.1 2.6.3c2-1.3 2.8-1 2.8-1 .5 1.4.2 2.4.1 2.7.6.7 1 1.6 1 2.7 0 3.9-2.3 4.6-4.5 5 .3.3.6.9.6 1.9v2.9c0 .3.2.6.7.5A10.01 10.01 0 0 0 22 12c0-5.5-4.5-10-10-10z"/></svg>
          </a>

          <a href="https://t.me/rucyontop" target="_blank" aria-label="Telegram" title="Telegram">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M21 3L3 10l5 2 2 5 2-6 8-6z"/></svg>
          </a>

          <a href="https://note.com/rucybook" target="_blank" aria-label="Note" title="Note">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M6 2h9l3 3v15a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/></svg>
          </a>

          <a href="https://soundcloud.com/rucygod" target="_blank" aria-label="SoundCloud" title="SoundCloud">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M3 15h10a4 4 0 0 0 0-8 6 6 0 0 1 0 12H3z"/></svg>
          </a>

          <a href="https://sptfy.in/rucy" target="_blank" aria-label="Spotify" title="Spotify">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM8.5 10.7c2.2-1.2 5-1.3 7.5-.6M7.2 13.6c1.6-.9 3.8-1.1 6-.6M7 16.3c1.2-.8 3-1 4.4-.6"/></svg>
          </a>
        </div>

        <div class="small kv">Profile — quick summary available in About section</div>
      </div>
    </section>

    <!-- Content grid: profile & projects -->
    <section class="grid-2">
      <!-- Profile -->
      <aside class="card profile-box" id="profileBox">
        <div class="h1small">Profile</div>
        <p><strong>名前：</strong>オクシモロン</p>
        <p><strong>年齢：</strong>高校生</p>
        <p class="kv"><strong>趣味：</strong>語ったり考えること・興味のある勉強や読書・ランニングや散歩・マインドフルネス瞑想</p>
        <div style="height:8px"></div>
        <div class="small kv">詳細はサイドメニューの About からどうぞ。</div>
      </aside>

      <!-- Projects -->
      <section class="card">
        <div class="h1small">Projects</div>
        <div class="proj-list" id="projList" aria-live="polite">
          <!-- JS populates -->
        </div>
      </section>
    </section>

    <!-- Player + Blog preview -->
    <section class="card">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <div style="display:flex;align-items:center;gap:12px">
          <button id="playBtn" class="play-btn" aria-label="play">▶</button>
          <div class="track-meta">
            <div class="track-title" id="trackTitle">Lv.2 vision (feat. AssToro)</div>
            <div class="track-artist small" id="trackArtist">alouji</div>
            <div class="progress" aria-hidden="true"><i id="progressBar"></i></div>
          </div>
        </div>

        <div class="small kv">Blog preview & recent posts below</div>
      </div>
    </section>

    <section id="blog" class="card">
      <div class="h1small">Recent Blog</div>
      <div id="posts" class="posts">
        <!-- JS renders posts -->
      </div>
      <div style="margin-top:10px"><a href="#" class="tag">All posts →</a></div>
    </section>
  </main>

  <footer class="footer" aria-hidden="false"><div class="footer-inner">© <span id="year2"></span> Oxymoron</div></footer>

</div>

<script>
(() => {
  /* ---------- Data ---------- */
  const PROJECTS = [
    {id:'sub', title:'Sub（サブツール）', url:'https://tls-client.github.io/sub/'},
    {id:'arashi', title:'Arashi Tool（嵐ツール）', url:'https://tls-client.github.io/arashi-tool/'},
    {id:'mass', title:'Mass Report（大量報告ツール）', url:'https://tls-client.github.io/mass-report/'},
    {id:'webhook', title:'Webhook Spammer', url:'https://tls-client.github.io/webhook-spammer/'},
    {id:'gleave', title:'Group Leaver', url:'https://tls-client.github.io/group-leaver/'},
    {id:'token', title:'Token Checker', url:'https://tls-client.github.io/token-checker/'},
    {id:'dm', title:'DM Tool', url:'https://tls-client.github.io/dm-tool'},
    {id:'bot', title:'Bot Tool', url:'https://tls-client.github.io/bot-tool/'},
    {id:'dfm', title:'Discord Fast Message', url:'https://github.com/tls-client/discord-fast-message'},
    {id:'spoof', title:'Invite Spoofer', url:'https://tls-client.github.io/discord-invite-spoofer/'}
  ];

  const POSTS = [
    {id:1,title:'初めての投稿',thumb:'images/th1.jpg',date:'2025-10-01',tags:['日記','自己分析'],excerpt:'はじめまして。サイトの紹介です。'},
    {id:2,title:'開発メモ: SNS用便利ツール',thumb:'images/th2.jpg',date:'2025-09-10',tags:['アプリ','開発'],excerpt:'ツールのまとめと使い方。'},
    {id:3,title:'散歩メモ',thumb:'images/th3.jpg',date:'2025-07-22',tags:['散歩','暮らし'],excerpt:'近所の公園で見つけたこと。'}
  ];

  const AUDIO_FILES = [
    { src: 'music/Lv2vision.mp3', title: 'Lv.2 vision (feat. AssToro)', artist: 'alouji' }
  ];

  /* ---------- DOM ---------- */
  const app = document.getElementById('app');
  const hambBtn = document.getElementById('hambBtn');
  const sideMenu = document.getElementById('sideMenu');
  const closeSide = document.getElementById('closeSide');
  const overlay = document.getElementById('overlay');
  const searchBtn = document.getElementById('searchBtn');
  const searchBar = document.getElementById('searchBar');
  const closeSearch = document.getElementById('closeSearch');
  const searchIcon = document.getElementById('searchIcon');
  const themeBtn = document.getElementById('themeBtn');
  const themeDot = document.getElementById('themeDot');
  const yearEls = [document.getElementById('year1'), document.getElementById('year2')];

  const projList = document.getElementById('projList');
  const postsEl = document.getElementById('posts');

  const playBtn = document.getElementById('playBtn');
  const trackTitle = document.getElementById('trackTitle');
  const trackArtist = document.getElementById('trackArtist');
  const progressBar = document.getElementById('progressBar');

  /* ---------- Utilities ---------- */
  function setYears(){ const y=new Date().getFullYear(); yearEls.forEach(e=>{ if(e) e.textContent=y; }); }
  function randomGradient(seed){
    const colors=[['#2b7ab5','#12597a'],['#7a2b6b','#c14bbf'],['#5a2b7a','#8a4bbf'],['#2b7a3a','#1b5f2a'],['#7a2b2b','#b52b2b'],['#2b4b7a','#26407a'],['#333333','#555555'],['#7a7a2b','#bfb45a']];
    let h=0; for(let i=0;i<seed.length;i++){ h += seed.charCodeAt(i); } const c=colors[h%colors.length]; return `linear-gradient(135deg, ${c[0]}, ${c[1]})`;
  }

  /* ---------- Theme handling ----------
     dot shows white for light, near-black for dark
  */
  function initTheme(){
    const saved = localStorage.getItem('ox_theme') || 'dark';
    app.setAttribute('data-theme', saved);
    updateThemeDot(saved);
  }
  function toggleTheme(){
    const cur = app.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
    app.setAttribute('data-theme', cur);
    localStorage.setItem('ox_theme', cur);
    updateThemeDot(cur);
  }
  function updateThemeDot(mode){
    if(!themeDot) return;
    if(mode === 'light'){
      themeDot.style.background = '#ffffff';
      themeDot.style.boxShadow = '0 0 0 4px rgba(255,255,255,0.06), 0 6px 18px rgba(0,0,0,0.08)';
      themeDot.title = 'Light mode';
    } else {
      themeDot.style.background = '#0a0a0a';
      themeDot.style.boxShadow = '0 0 0 4px rgba(0,0,0,0.06), 0 6px 18px rgba(0,0,0,0.6)';
      themeDot.title = 'Dark mode';
    }
  }

  /* ---------- Side / Overlay ---------- */
  function openSide(){ sideMenu.classList.add('open'); overlay.classList.add('show'); sideMenu.setAttribute('aria-hidden','false'); }
  function closeSideFn(){ sideMenu.classList.remove('open'); overlay.classList.remove('show'); sideMenu.setAttribute('aria-hidden','true'); }
  overlay.addEventListener('click', ()=>{ closeSideFn(); hideSearch(); });

  /* ---------- Search ---------- */
  let searchAnimating = false;
  function showSearch(){
    if(searchAnimating) return;
    searchAnimating = true;
    // animate search icon (spinPulse)
    searchIcon.style.animation = 'spinPulse 900ms linear infinite';
    searchBar.style.display = 'block';
    overlay.classList.add('show');
    setTimeout(()=>{ const inp = document.getElementById('searchInput'); if(inp) inp.focus(); searchAnimating=false; }, 200);
  }
  function hideSearch(){
    searchIcon.style.animation = '';
    searchBar.style.display = 'none';
    overlay.classList.remove('show');
  }

  /* ---------- Render Projects & Posts ---------- */
  function renderProjects(){
    if(!projList) return;
    projList.innerHTML = '';
    PROJECTS.forEach(p=>{
      const card = document.createElement('div'); card.className='proj-card';
      const ic = document.createElement('div'); ic.className='proj-icon'; ic.style.background = randomGradient(p.id); ic.textContent = p.title.split(' ')[0].slice(0,2).toUpperCase();
      const txt = document.createElement('div'); txt.className='proj-title'; txt.innerHTML = `<a href="${p.url}" target="_blank" rel="noopener">${p.title}</a>`;
      card.appendChild(ic); card.appendChild(txt);
      projList.appendChild(card);
    });
  }

  function renderPosts(){
    if(!postsEl) return;
    postsEl.innerHTML = '';
    POSTS.forEach(p=>{
      const d=document.createElement('div'); d.style.marginBottom='12px';
      d.innerHTML = `<div style="display:flex;gap:10px;align-items:flex-start">
        <div style="width:96px;height:64px;border-radius:8px;background:#222;background-image:url('${p.thumb}');background-size:cover"></div>
        <div>
          <div style="font-weight:700">${p.title}</div>
          <div class="small kv">${p.date}</div>
          <div style="margin-top:8px;color:var(--muted)">${p.excerpt}</div>
          <div style="margin-top:8px">${p.tags.map(t=>`<span class="tag">${t}</span>`).join(' ')}</div>
        </div>
      </div>`;
      postsEl.appendChild(d);
    });
  }

  /* ---------- Player ---------- */
  let audio=null, playing=false;
  function initPlayer(){
    if(AUDIO_FILES.length===0) return;
    audio = new Audio(AUDIO_FILES[0].src);
    audio.preload='auto';
    trackTitle.textContent = AUDIO_FILES[0].title;
    trackArtist.textContent = AUDIO_FILES[0].artist || '';
    playBtn.addEventListener('click', togglePlay);
    audio.addEventListener('timeupdate', updateProgress);
    audio.addEventListener('ended', ()=>{ playing=false; playBtn.textContent='▶'; });
  }
  function togglePlay(){
    if(!audio) return;
    if(!playing){ audio.play().then(()=>{ playing=true; playBtn.textContent='⏸'; }).catch(()=>{}); }
    else { audio.pause(); playing=false; playBtn.textContent='▶'; }
  }
  function updateProgress(){
    if(!audio) return;
    const pct = (audio.currentTime / audio.duration) * 100 || 0;
    progressBar.style.width = pct + '%';
  }

  /* ---------- Events ---------- */
  hambBtn.addEventListener('click', openSide);
  closeSide.addEventListener('click', closeSideFn);
  searchBtn.addEventListener('click', showSearch);
  closeSearch.addEventListener('click', hideSearch);
  themeBtn.addEventListener('click', toggleTheme);

  // nav section linking (SPA-like)
  document.querySelectorAll('.topnav a, .side-links a').forEach(a=>{
    a.addEventListener('click', (e)=>{
      const target = a.dataset.section;
      if(target){
        e.preventDefault();
        document.querySelectorAll('.section').forEach(s=>s.style.display='none');
        const el = document.getElementById(target) || document.getElementById(a.getAttribute('href')?.replace('#',''));
        if(el) { el.style.display='block'; }
        document.querySelectorAll('.topnav a').forEach(n=>n.classList.remove('active')); 
        if(a.classList) a.classList.add('active');
        // close side if mobile
        closeSideFn();
      }
    });
  });

  /* ---------- Init ---------- */
  function init(){
    setYears();
    initTheme();
    renderProjects();
    renderPosts();
    initPlayer();
    // ensure home visible
    document.querySelectorAll('.section').forEach(s=>s.style.display='none');
    const home = document.getElementById('home'); if(home) home.style.display='block';
  }
  function setYears(){ const y=new Date().getFullYear(); document.querySelectorAll('#year1,#year2').forEach(e=>{ if(e) e.textContent=y; }); }
  document.addEventListener('DOMContentLoaded', init);
})();
</script>
</body>
</html>
